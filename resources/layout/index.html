<!DOCTYPE html>
<html lang="en-us">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Map Module</title>
<link rel="icon" type="image/x-icon" href="../../img/logo/favicon.png" />

<link rel="stylesheet" href="../../css/community.css" />

<script type="text/javascript" src="../../js/jquery/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../../js/common/common.js"></script>
<!-- Activate to include site navigation-->
<script type="text/javascript" src="../../js/common/navigation.js"></script>
<link rel="stylesheet" href="../../css/leaflet/leaflet.css" />
 <!-- Resides AFTER Leaflet's CSS -->
<script src="../../js/leaflet/leaflet.js"></script>

<script src="../../js/d3/d3.v5.min.js"></script>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link href="../../css/leaflet/leaflet.icon-material.css" rel="stylesheet">
<script src="../../js/leaflet/leaflet.icon-material.js"></script>
<script src="../../js/d3/d3-legend.js"></script>
<script type="text/javascript" src="../../js/common/dual-map.js"></script>
<link rel="stylesheet" href="../../css/map.css" />
</head>

<body>

<style>
#map {
	height: 250px;
}
#sidecolumnContent {
	position: relative !important;
}
#logoholderside {
	display:none;
}
#allLegends {
	color:#fff !important; 
}
#allLegends > .label {
	color:#fff !important; 
}
.topboxes {
  border:1px solid #eee;
  padding:10px;
  padding-left:15px;
  min-height: 120px;
  margin-bottom: 18px;
}
.column50 {
  width:47%;
  float:left;
}
.column50mid {
  width:6%;
  float:left;
}
.widgetbar {
  background: #ddd;
  height:24px;
  max-height:24px;
  line-height: 18px;
  font-size: 13px;
  font-family: Lato, sans-serif;
  font-weight: bold;
  padding:6px 0 0 10px;
}
.boxborder {
  border:1px solid #ddd;
  padding:10px;
  padding-left:16px;
  font-size: 14px;
}
</style>

<script>
var headerObjs = [
      { class: "", column: "Sectors", label: "382 Industry Sectors", sort_type: "string" },
      { column: "US_2007_Demand_$", label: "US Demand $ (2007)", sort_type: "int" },
      { class: "rotate", column: "ACID", label: "Acid Rain", sort_type: "int" },
      { class: "rotate", column: "CCDD", label: "Construction Debris", labelfull: "Commercial Construction & Demolition Debris", sort_type: "int" },
      { class: "rotate", column: "CMSW", label: "Municipal Solid Waste", labelfull: "Commercial Municipal Solid Waste", sort_type: "int" },
      { class: "rotate", column: "CRHW", label: "Hazardous Waste", labelfull: "Commercial RCRA Hazardous Waste", sort_type: "int" },
      { class: "rotate", column: "ENRG", label: "Energy Use", sort_type: "int" },
      { class: "rotate", column: "ETOX", label: "Freshwater Ecotoxicity", sort_type: "int" },
      { class: "rotate", column: "EUTR", label: "Water Eutrophication", sort_type: "int" },
      { class: "rotate", column: "GHG",  label: "Global Climate Change", sort_type: "int" },
      { class: "rotate", column: "HAPS", label: "Hazardous Air Pollution", labelfull: "Hazardous Air Pollutants", sort_type: "int" },
      { class: "rotate", column: "HCAN", label: "Unhealthy - Cancer", labelfull: "Human Health Cancer", sort_type: "int" },
      { class: "rotate", column: "HNCN", label: "Unhealthy - Noncancer", labelfull: "Human Health Noncancer", sort_type: "int" },
      { class: "rotate", column: "HRSP", label: "Respiratory Effects", sort_type: "int" },
      { class: "rotate", column: "HTOX", label: "Toxic to Humans", sort_type: "int" },
      { class: "rotate", column: "JOBS", label: "Jobs", sort_type: "int" },
      { class: "rotate", column: "LAND", label: "Land Use", sort_type: "int" },
      { class: "rotate", column: "METL", label: "Metals", sort_type: "int" },
      { class: "rotate", column: "MNRL", label: "Mineral Use", sort_type: "int" },
      { class: "rotate", column: "NNRG", label: "Non Renewable Energy", labelfull: "Non Renewable Energy Use",sort_type: "int" },
      { class: "rotate", column: "OZON", label: "Ozone Depletion", sort_type: "int" },
      { class: "rotate", column: "PEST", label: "Pesticides", sort_type: "int" },
      { class: "rotate", column: "RNRG", label: "Renewable Energy Use", sort_type: "int" },
      { class: "rotate", column: "SMOG", label: "Smog Formation", sort_type: "int" },
      { class: "rotate", column: "VADD", label: "Value Added", sort_type: "int" },
      { class: "rotate", column: "WATR", label: "Water Use", sort_type: "int" },
    ];
</script>

<aside class="Intermodal_Ports">
group,lat,lon,value,address,city,state,zip
Inman Rail Yard,33.795735,-84.439278,NS,1600 Marietta Rd NW,Atlanta,GA,30318
Savannah Yard,32.069578,-81.142174,CSX,3000 Tremont Ave,Savannah,GA,31405
James D. Mason ICTF,32.123934,-81.150914,NS,3 North Main St,Garden City,GA,31408
Fairburn Industry Yard,33.554907,-84.595026,CSX,6700 McLarin Rd,Fairburn,GA,30213
Whitaker Rail Yard,33.80944,-84.655451,NS,6000 Westside Rd,Austell,GA,30106
Chatham ICTF,32.125311,-81.151331,CSX,2 Main St,Garden City,GA,31408
Savannah,32.10035,-81.169963,NS,1 Charlie Gay Drive,Savannah,GA,31408
Cordele Intermodal Center,31.966779,-83.755101,Heart GA,2902 East 13th Ave.,Cordele,GA,31010
Port of Savannah Ocean Terminal,32.093702,-81.111692,"Ro/Ro, Breakbulk",55 N Lathrop Ave,Savannah,GA,31415
Port of Brunswick,31.125887,-81.541194,"Ro/Ro, Agri-Bulk",157 Penniman Cir,Brunswick,GA,31523
Port of Savannah,32.125,-81.151,Container,2 Main St,Savannah,GA,31407
Port of Brunswick Mayor's Point Terminal,31.143373,-81.494753,Breakbulk,1100 Bay Street,Brunswick,GA,31520
Port of Columbus,32.448734,-84.984038,Liquid Bulk,800 Lumpkin Blvd,Columbus,GA,31901
Port of Bainbridge,30.902867,-84.606259,Liquid/Dry Bulk,1321 Spring Creek Road,Bainbridge,GA,39817
</aside>


<div class="displayOnload" style="display:none;position:relative;">
  <div id="map"></div>
  <div id="legendHolder">
    <div id="allLegends"></div>
  </div>
</div>
</section>
<div style="clear:both"></div>


<table>
  <tr>
    <td style="vertical-align:top;border-right:#ddd 1px solid;">
  <div id='sidecolumn' class='hideprint'>
    
  </div>
</td>
<td style="align:center">


<section id="industries" style="overflow:auto">
  <div class="content" style="padding-bottom:0px">
    <h1>Southeast Georgia&nbsp;Coalition</h1>

    <div style="float:left; width:400px">
      <div class="widgetbar">ENVIRONMENTAL INPUT</div>
      <div class="topboxes">
        <div style="font-size: 18px">Set your goals</div>
        <br>

        <b>Adjust Industry Levels</b>
        to reflect new technology iniatives 
        to generate new revenue streams, create jobs and 
        increase your community's positive outcomes.

      </div>
    </div>
    <div style="overflow: auto;">
      <div style="margin-left:30px">
        <div class="widgetbar">
          <div style="float:left">POSITIVE OUTCOMES</div>
          <div style="float:right; padding-right:10px"><span style='color:#555'>YOUR SCORE:</span> 500</div>
        </div>
        <div class="topboxes">

          <div style="float:left;width:50%">
            <div>1. Value-Added</div>
            <div>2. Quality Jobs</div>
            <div>3. Clean Water</div>
            <div>4. Clean Energy</div>
            <div>5. Green Materials</div>
          </div>
          <div style="float:left;width:50%">
            <div>6. Local Agriculture</div>
            <div>7. Family Friendly</div>
            <div>8. Health+Happiness</div>
            <div>9. Inclusiveness</div>
            <div>10. Creates Beauty</div>
          </div>
        </div>
      </div>
    </div>

    <div style="float:left; width:400px">
      <div class="widgetbar" style="padding-left:5px">
        <a href="../../samples/dataset/"><img src="img/backarrow.gif" style="width:11.5px;float:left;margin:1px 7px 0 0"></a>
        AGRICULTURE, FORESTRY, FISHING AND HUNTING</div>
      <img src="img/sectors.gif" style="width:100%;" /><br>

      <div style="font-size: 12px; background:#eee; border-bottom:1px solid #ddd; display:inline; padding:0 4px 0 4px">
        <a href="../../samples/dataset/">Main categories</a> | 
        <a href="../../samples/dataset/">Show all 439 sectors</a>
      </div>
    </div>

    <div style="overflow: auto;">
      <div style="margin-left:30px">
          <div class="widgetbar">ADVERSE IMPACTS</div>
        
          <div class="column50"><img src="img/impacts1.gif" style="width:100%; max-width:300px; padding-right:40px" /></div>
          <div class="column50mid">&nbsp;</div>
          <div class="column50"><img src="img/impacts2.gif" style="width:100%; max-width:300px; padding-right:40px" /></div>
        
       </div>
    </div>
  </div>
</section>

<!-- Start HTML -->
<section id="data" style="overflow:auto">
<div class="content displayOnload" style="display:none">
  <div id="flexwrapper">
    <div id="hublist">

      
      <h2 style="font-size: 18px; margin:0px; font-weight: 600">Community Map Widget</h2><br>
      
        The map to the right will change based on interaction with lists and charts.<br>
        Lists will include <a href="../../farmfresh/ga/">farm fresh produce</a> and <a href="../../tools/#places">all the places</a>.

      <h2 style="margin-top:10px"></h2>

      <div id="detaillist"></div>
      <div id="narrowlist" style="display:none"></div>
    </div>

    <a name="gomap"></a>
    <div id="mapHolder">
      <div class="mapHolderInner">
        <div class="mapHolderCard card">
          <div id="maptop">
            <div style="position:absolute; left:0; padding:4px 4px 4px 10px">
              Six County Region
            </div>
          </div>

          <div style="clear:both">  
            <div id="map2"></div>
          </div>

        </div>
      </div>
    </div>
  
  </div><!-- flexwrapper -->
</div>  

</section>
<!-- End HTML -->
</td></tr></table>

<!--
To add and update listings, download the <a href="map.csv">map.csv</a> file and edit within a spreadsheet.  
  Copy using a text editor and click the pencil icon <a href="https://github.com/modelearth/community/blob/master/map/map.csv">here</a> to paste into GitHub for review. 
  <span style="white-space: nowrap;">Or you can fork</span> the <a href="https://github.com/modelearth/community">GitHub Repo</a> and commit using <a href="https://desktop.github.com/">GitHub Desktop</a>.
-->

<script>

loadFromCSV('map', "/community/tools/map.csv", function(results) {
    // This function gets called by the geocode function on success
    layerControl['map'].addOverlay(baselayers["Rail"], "Railroads"); // Appends to existing layers      
});


// INTERMODAL PORTS
dp = {
  selector: "aside.Intermodal_Ports",
  delimiter: ",",
  numColumns: ["lat","lon"],
  valueColumn: "value",
  scaleType: "scaleOrdinal",
  //scaleType: "scaleQuantile",
  //scaleType: "scaleThreshold",
}
//dp.name = dp.selector.split(".").pop(); // name: Intermodal_Ports
dp.name = "Intermodal Ports"
dp.data = readData(dp.selector, dp.delimiter, dp.numColumns, dp.valueColumn);
//dp.color = '#0033ff'; // Alternative to scale
dp.scale = getScale(dp.data, dp.scaleType, dp.valueColumn);

dp.group = L.layerGroup();
//dp.group2 = L.layerGroup();
//dp.iconName = 'device_hub';
dp.iconName = 'language';
//dataParameters.push(dp);
addIcons(dp);

// Legend needs to reside below map on left, or in side popup
//addLegend(dp.scale, dp.scaleType, dp.name);

var map2 = populateMap('map2', dp);
//basemaps["Rail"].addTo(map1);

layerControl['map2'].addOverlay(baselayers["Rail"], "Railroads"); // Appends to existing layers

// Test
//var mapX = loadFromCSV('map', "/community/tools/map.csv");

// DATA-DRIVEN
//var map2 = loadFromCSV('map2', "/community/tools/map.csv");
//var map2 = populateMap('map2', dp);


</script>
</body>
</html>