<!DOCTYPE html>
<html lang="en-us">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>2020 Community Challenge - Lifecycle Marketplace - Net Zero Footprint</title>
<link rel="icon" type="image/x-icon" href="../img/logo/favicon-usa-ga.png" />

<!--
  // To do: Mask Georgia Outline - from embed.js
  // cropMap = true requires the folllowing 3:
  // http://leaflet-extras.github.io/leaflet-providers/leaflet-providers.js"></script>
  // /documentation/region/js/boundary-canvas.js
  // /documentation/region/js/georgia.js


  // stickybits
  // Also see: https://dollarshaveclub.github.io/stickybits/
  // But will probably look at embed.js to detect when button of section reaches bottom of map.

  Angshuman Guin
  Senior Research Engineer
  Transportation Systems Engineering
  Smart Cities
  https://ce.gatech.edu/people/faculty/1251/overview

  Technology-Enabled Smarter Safer Routes to School for the City of Milton, GA
  http://smartcities.ipat.gatech.edu/sites/default/files/CityOfMilton_SmarterSaferRoutesToSchool.pdf

-->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"
integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
crossorigin=""/>
 <!-- Make sure you put this AFTER Leaflet's CSS -->
<script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
crossorigin=""></script>

<script src="../js/d3/d3.v5.min.js"></script>
<!--
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3-legend/2.25.6/d3-legend.min.js"></script>
-->

<script type="text/javascript" src="../js/common/showdown.min.js"></script>
<script type="text/javascript" src="../js/jquery/jquery-1.12.4.min.js"></script>

<!--script type="text/javascript" src="../js/jquery/zepto.min.js"></script--><!-- stop().animate() are needed -->

<link rel="stylesheet" href="../css/community.css" />

<script type="text/javascript" src="../js/common/common.js"></script>
<script type="text/javascript" src="../js/common/navigation.js"></script>
<link rel="stylesheet" href="../css/display.css" />

  <!-- https://github.com/ilyankou/Leaflet.IconMaterial -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="../css/leaflet/leaflet.icon-material.css" rel="stylesheet">
  <script src="../js/leaflet/leaflet.icon-material.js"></script>

  <style>
    h1 {
      font-size: 34px; 
      font-familyX: "Cooper Light",Georgia,Times,"Times New Roman",serif;
      font-weight: 100;
      -webkit-font-smoothing:antialiased;
    }
    h2 { font-size: 18px; }
    #map {
      height: 600px;
      width: 100%;
    }
    #mapTitle {
      position: absolute;
      background-color:rgba(33,33,33,0.5);
      color:#fff;
      bottom:0;
      left:0;
      padding:10px 30px 10px 30px;
      font-size: 18px;
      z-index: 100000;
    }
    #map2 {
      height: 500px;
      rightX: 0;
      widthX: 100%;
      box-sizing: border-box;
    }

    aside, pre { display: none; }
    div#allLegends { position: relative; }
    div.legend { position: relative; width: 200px; float: left; }
    .padding-left {
      padding-left:70px;
    }
    .headerLogo {
      height:40px;
      margin:28px 10px 4px 50px
    }

    .topLinks {
        z-index: 99999;
        padding: 20px 20px 20px 50px;
        font-size: 18px;
    }
    .topLinks a {
        color: #777;
        text-decoration: underline;
    }
    @media (max-width: 800px) {
      .padding-left {
        padding-left:0px;
      }
    }
    .my-div-icon {
      width: 24px !important;
      height: 20px !important;
      background-color: red;
      position:relative;
    }
    .my-div-icon:after {
      position: absolute;
      /* content: " (" attr(href) ")"; */
      content: "1";
      color: #fff;
      font-size: 14px;
      font-weight: 400;
      line-height: 20px;
      text-align: center;
      left: 0;
      right: 0;
    }
  </style>
</head>
<body>

<a name="map"></a>

<!-- 1. + 2. insert aside block + data -->
<aside class="myDataset">
group,lat,lon,index,address
BK,48.157630,11.648014,1800,lothringer
BK,48.141579,11.604729,100,sdakjh
BK,48.143640,11.603463,1800,dsfasfslk 3.
BK,48.157630,11.648014,1800,loithringer
BK,48.141579,11.604729,100,sdakjh
BK,48.143640,11.603463,1800,dsfasfslk 3.
BK,48.143827,11.602895,500, sadkfjalsfj
BK,48.143640,11.603463,,dsfasfslk 3.
BK,48.143827,11.602895,, sadkfjalsfj
BK,48.144099,11.602444,120, hansenstrasse 4A
</aside>

<aside class="d2">
group,lat,lon,value
KK,48.157630,11.648014,30
KK,48.141579,11.604729,1800
KK,48.143640,11.603463,200
</aside>

<aside class="Intermodal_Ports">
group,lat,lon,value,address,city,state,zip
Inman Rail Yard,33.795735,-84.439278,NS,1600 Marietta Rd NW,Atlanta,GA,30318
Savannah Yard,32.069578,-81.142174,CSX,3000 Tremont Ave,Savannah,GA,31405
James D. Mason ICTF,32.123934,-81.150914,NS,3 North Main St,Garden City,GA,31408
Fairburn Industry Yard,33.554907,-84.595026,CSX,6700 McLarin Rd,Fairburn,GA,30213
Whitaker Rail Yard,33.80944,-84.655451,NS,6000 Westside Rd,Austell,GA,30106
Chatham ICTF,32.125311,-81.151331,CSX,2 Main St,Garden City,GA,31408
Savannah,32.10035,-81.169963,NS,1 Charlie Gay Drive,Savannah,GA,31408
Cordele Intermodal Center,31.966779,-83.755101,Heart GA,2902 East 13th Ave.,Cordele,GA,31010
Port of Savannah Ocean Terminal,32.093702,-81.111692,"Ro/Ro, Breakbulk",55 N Lathrop Ave,Savannah,GA,31415
Port of Brunswick,31.125887,-81.541194,"Ro/Ro, Agri-Bulk",157 Penniman Cir,Brunswick,GA,31523
Port of Savannah,32.125,-81.151,Container,2 Main St,Savannah,GA,31407
Port of Brunswick Mayor's Point Terminal,31.143373,-81.494753,Breakbulk,1100 Bay Street,Brunswick,GA,31520
Port of Columbus,32.448734,-84.984038,Liquid Bulk,800 Lumpkin Blvd,Columbus,GA,31901
Port of Bainbridge,30.902867,-84.606259,Liquid/Dry Bulk,1321 Spring Creek Road,Bainbridge,GA,39817
</aside>

<!--
group,lat,lon,value
KI,48.157630,11.648014,Sepp
KI,48.141579,11.604729,Schorsch
KI,48.143640,11.603463,Hans
-->

<style>
  .leaflet-popup {
    bottom: 17px !important; 
    /* Need to move map down more when popup is near top.  Default is -7px. */
  }
  #floatingButtons {
    display:none;
    height:40px;
    width:100%;
    position:fixed;
    bottom:0;
    background-color:#777;
    z-index:9999;
  }
  #flexwrapper {
    padding-topX: 40px;
  }
  #flexwrapper {
    display: flex;
    justify-content: space-between;
    position: relative;
  }
  #hublist {
    overflow: auto;
    width:54%;
    padding-right:40px
  }
  #mapHolder {
    width: 46%;
    /* Show box for testing scroll */
    /* border: 1px solid #ccc; */

    position: relative;
  }

  .mapHolderBottom {
    position: absolute;
    bottom: 0px;
    width: 100%;
  }
  .mapHolderFixed {
    position: fixed;
    top: 80px;
    bottom: auto;
    width: 46%;
    width: 440px;
    padding-rightX: 30px; /* since fix is relative to page */
  }
  
  #maptop {
    height: 30px;
    border-bottomX: 1px solid #999;
    background-color: #fff;
    position: relative;
    color: #555;
    font-size: 16px;
  }
  
  
  .mapHolderFixed > .mapHolderCard {
    margin-right: 30px;
  }

  @media (max-width: 800px) {

    .padding {
      padding: 20px;
    }
    #flexwrapper {
      display: block;
      box-sizing: border-box;
    }
    #hublist {
      width:auto;
      
    }
    .padding-left {
      padding-left: 30px;
    }
    #mapHolder {
      width: auto;
      margin-top: 70px;
      margin-left: 30px;
      margin-bottom: 30px;
    }
    .mapHolderInner {
      position: relative;
      width: auto;
    }
    .mapHolderCard {
      heightX:400px;
      margin-right: 30px;
      borderX: 0px solid #fff;
    }

    #hublist {
      margin-left: 30px;
      margin-right: 30px;
    }

    #floatingButtons {
      display:block;
    }
  }
  @media (max-width: 500px) {
    h1 {
      font-size: 30px; 
      font-weight: 400;
    }
    .fullMobile {
      max-width:100% !important;
    }
  }

  #fullcolumn {
      background-color: rgb(250, 250, 250);
  }
  .litePanel {
      background-color: #fff;
      overflow:auto;
  }
</style>


<div id="allsections">
  <section id="intro" class="litePanel">
    <div class="content" style="padding-top:50px">
      <h1 style="margin-bottom:0px" class="h1-home">Is your Community Up to the Challenge?</h1>
      <!-- Marketplace -->

      <!--
      We're integrating visulization tools and distributed datasets 

      to increase efficiency 
      while protecting the environment using  
      -->
       
      <a href="https://www.epa.gov/smm" style="white-space:nowrap">Sustainable Materials Management</a> tools for communities, builders and manufacturers.<br>

      <!--
      <br>
      We've assembled the following as starting points for participants in our 2020 sustainable community events.
      -->

      <style>
        .three {
          margin-left: -20px;
          margin-right: -30px;

        }
        .three div {
          width:33%;
          float:left;
          padding-left: 20px;
          padding-right: 20px;
          box-sizing: border-box;
        }
        @media (max-width: 700px) {
          .three div {
            width:100%;
            float:none;
            padding-right:40px;
          }
        }
      </style>

      <div class='three' style='overflow:auto;'>
        <div>
          <!-- What? -->
          <h2>Input-Output Modeling</h2>
          <b>What</b> – Tools for analyzing economic and environmental impacts in over 400&nbsp;industry sectors 
          for community planning, business development and environmental education. 

        </div>
        <div>
          <!-- Why? -->
          <h2>Material Reuse/Recycling</h2>
          <b>Why</b> – To foster informed decisions while&nbsp;creating connections that turn waste streams into revenue streams 
          that lower the cost of material input during production.
        </div>
        <div>
          <!-- How -->
          <h2>Decentralized Market&nbsp;Data</h2>
          <b>How</b> – By combining local, regional and national data feeds with new modules developed using USEEIO, the US EPA's Environmentally-Extended <span style='white-space: nowrap;'>Input-Output API.</span>
        </div>
      </div>

      <div>
          <h2>Upcoming Events and Internships</h2>
          In the Spring of 2020, Georgia communities will participate in our Life Cycle App Ideas Challenge to inspire and help set priorities. 
          During the Summer of 2020, Georgia university students will receive paid internships to create modules with local and regional data. 
          In the Fall of 2020, we'll expand on the new tools during the Code for America Sustainable Communities Net Zero Hackathon. 
          <a href="https://model.georgia.org/communities" target="_blank" style="white-space: nowrap">Learn More and Register</a>.<br><br>

          <b>What's new:</b>
          Amazon is using USEEIO to reduce their carbon footprint to Net Zero by 2040. - 
          <a href="https://sustainability.aboutamazon.com/carbon-footprint">Overview</a> / 
          <a href="https://d39w7f4ix9f5s9.cloudfront.net/a4/ad/b9eca67e4578b35e8f995c8b4f9c/amazon-carbon-methodology-september-2019.pdf">Details</a>
          
      </div>

    </div>
  </section>

  
  <section id="objectives">
    <div class="content" style="font-size: 18px">

      <a href="https://www.epa.gov/smm/epa-sustainable-materials-management-program-strategic-plan-fiscal-years-2017-2022">
        <img src="../img/overview/smmstratplan.jpg" style="width:100%; max-width:180px; float:right; margin:0 0 30px 40px" class="fullMobile"></a>

      <!-- The Urgency of Now -->
      <h1>Sustainable Materials Management Objectives</h1>
      <!-- US EPA's four primary SMM program objectives -->
     
      <ol>
      <li>Decrease the disposal rate, which includes source reduction, reuse, recycling and prevention;</li>
      <li>Reduce the environmental impacts of materials across their life cycle;</li>
      <li>Increase socio-economic benefits; and </li>
      <li>Increase the capacity of state and local governments, communities and key stakeholders to adopt and implement SMM policies, practices and incentives.</li>
      </ol>

    </div>

    <div style="position:relative;">
      <div id="map"></div>
      <div id="mapTitle">Intermodal Ports</div>
    </div>
  </section>
  <div style="clear:both"></div>



  <section id="data" class="litePanel">
    <div class="content">
      <div id="flexwrapper">
        <div id="hublist">

          <h1>Data Driven Decision&nbsp;Making</h1>

          

          <h2 style="font-size: 18px; margin-bottom:0px; font-weight: 600">Smart & Sustainable Movement of <span style="white-space: nowrap">Goods & Services</span></h2>
          
          <!--
          <a href="../samples/feed" class="button">Add your data feeds</a>
          -->

          <input type="button" onclick="location.href='../samples/feed';" value="Add your data feeds" />
          <br><br>

          <!--
          <h1 style="margin-bottom:0px">Sustainable Movement of Goods & Services</h1>
          -->
          <!-- Smart & Mobile -->

          <!--
          <h3 style="margin-top:0px; margin-bottom:20px; font-size: 1.24em;">Smart Georgia - Data Driven Decision Making</h3>
          -->
          <!--Opportunities for Waze integration:<br><br>-->

          <div id="detaillist"></div>
          <div id="narrowlist" style="display:none"></div>
        </div>

      <a name="gomap"></a>
      <div id="mapHolder">
        <div class="mapHolderInner">
          <div class="mapHolderCard card">
            <div id="maptop">
              <div style="position:absolute; left:0; padding:4px 4px 4px 10px">
                Connected Communities
              </div>
            </div>

            <div style="clear:both">  
              <div id="map2"></div>
            </div>

            
          </div>
        </div>
      </div>
      <div id="allLegends"></div>
  </div><!-- flexwrapper -->

    <!--
    <hr>
    To add and update listings, download the <a href="map.csv">map.csv</a> file and edit within a spreadsheet.  
      Copy using a text editor and click the pencil icon <a href="https://github.com/modelearth/community/blob/master/map/map.csv">here</a> to paste into GitHub for review. 
      <span style="white-space: nowrap;">Or you can fork</span> the <a href="https://github.com/modelearth/community">GitHub Repo</a> and commit using <a href="https://desktop.github.com/">GitHub Desktop</a>.
    -->
  </div>  

  </section>

  
      

  <div id="disqus_thread"></div>


  <section id="modeling">
    <div class="content">
      <h1>Statewide Input-Output Modeling</h1>

      Screenshot from EPA Georgia interface. &nbsp;
      <a href="../samples/dataset/">Module example</a> to be pulled from a CSV file output from the USEEIO API.<br><br>


      <img src="../img/overview/heatmap.png" style="width:100%"><br><br>


      <style>
        .impacttable td {
          padding: 20px 20px 0px 20px;
          border:1px solid #ccc;
          font-size: 15px;
        }
        .impacttable th {
          padding: 5px 20px 5px 20px;
          text-align: left;
        }
      </style>

      <table class="impacttable">
      <tbody>
        <tr>
          <th style="background:#DDA4A8; color:#fff">
            <b>Adverse Impacts</b>
          </th>
          <th style="background:#AFD0B7; color:#fff">
            <b>Positive Impacts</b>
          </th>
        </tr>
        <tr><td>

        <div style="float:left; margin-right:25px">
        <b>Environmental</b><br>
        Acid Rain (ACID)<br>
        Freshwater Ecotoxicity (ETOX)<br>
        Water Eutrophication (EUTR)<br>
        Global Climate Change (GCC)<br>
        Respiratory Effects (HRSP)<br>
        Toxic to Humans (HTOX)<br>
        Ozone Depletion (OZON)<br>
        Smog Formation (SMOG)<br><br>
        </div>

        <div style="float:left; margin-right:25px">
        <b>Resource Use</b><br>
        Energy Use (ENRG)<br>
        Land Use (LAND)<br>
        Minerals and Metals (MINE)<br>
        Water Use (WATR)<br><br>
        </div>

        <div style="float:left;">
        <b>Waste Generated</b><br>
        Food Waste (FOOD)<br>
        Hazardous Waste (HAZW)<br>
        Muncipal Solid Waste (MSW)<br><br>

        </div>
        <div style="clear:both">
        </div>

      </td>

      <td style="vertical-align: top">
        <div>
        <b>Economic & Social</b><br>
        Jobs (JOBS)<br>
        Value Added (VADD)<br>
        </div>

      </td>
      </tr>
      </tbody>
      </table>

    </div>
  </section>


  <section id="charts" class="litePanel contentTop padding">
    <div class="content">

      <h1>Sankey Charts of Material Flow</h1>
      <a href="../samples/charts">View Chart Starters</a>

      <div id="observablehq-fe91f8f3"></div>
      <script type="module">
      import {Runtime, Inspector} from "https://cdn.jsdelivr.net/npm/@observablehq/runtime@4/dist/runtime.js";
      import define from "https://api.observablehq.com/@dralla666/d3-sankey-diagram.js?v=3";
      const inspect = Inspector.into("#observablehq-fe91f8f3");
      (new Runtime).module(define, name => (name === "chart") && inspect());
      </script>

      <img src="../img/overview/flow.png" style="width:100%">

      <!--
      Source:
      https://www.kenflerlage.com/2018/04/sankey-template.html
      -->

    </div>
  </section>

  <div style="clear:both"></div>

  <section id="regional">
    <div class="content">
      <div id="readmeDiv"></div><br>

      <iframe class="block-map-directory cf" id="map_directory" src="../samples/maps/counties/counties.html" style="width:100%;height:500px"></iframe>
    </div>
  </section>

  <section id="value" class="litePanel">
    <div class="content">
      <div id="readmeDiv"></div><br>

      <h1>Value-Added Products from Waste</h1>

      <h3>Creative ways waste is being recylced...</h3>

      <h2>In Brewing</h2>

      <a href="https://www.popularmechanics.com/science/green-tech/a29994824/barley-beer-renewable-fuel/">Turning Beer Byproducts (leftover Barley) Into Carbon Nanotubes</a><br>
      Nov 26, 2019 - 

      Scientists have created a low-cost renewable fuel for homes in winter, charcoal for summer barbecues, active carbon for water filters and treating poison, and carbon nanotubes for cancer treatment and drug delivery.
      <br><br>

       <a href="https://www.sciencedaily.com/releases/2019/10/191025170815.htm">Capturing Carbon from Air using Carbon Nanotubes</a><br>
      October 25, 2019 - A significantly less energy-intensive way to capture carbon from air at virtually any concentration level.<br><br>

      <a href="https://www.bloomberg.com/news/articles/2019-12-04/whiskey-makers-are-making-a-play-for-climate-conscious-drinkers?srnd=premium">Whiskey Makers Are Making a Play For Climate-Conscious Drinkers</a><br>
      Distilleries are touting water conservation, forest planting, butterfly waystations and bee protection.<br>

      <!--
        Brewery dataset 2015
        https://github.com/gboeing/beer-locations/blob/master/data-analysis/visualization/datasets/locations-final-cleaned.csv
      -->
     


      <h2>In Paper Production</h2>

      The expanse of the global lignin market is being driven by the increasing demand for carbon fibers in the construction and automotive industries.  <a href="https://thebrunswicknews.com/news/local_news/judge-rules-for-rayonier-in-altamaha-pollution-case/article_2ee33a04-7d24-52c2-9184-e8980eb8ae39.html">Paper&nbsp;mills</a> currently discharge million of gallons of lignin effluent into waterways daily. 
      Lignin is an organic, often pale-yellow, connecting substance found between and in plant cells. 
       
      <!--
      Rayonier discharges around 50 to 60 million gallons of lignin effluent into the river daily.  <a href="https://thebrunswicknews.com/news/local_news/judge-rules-for-rayonier-in-altamaha-pollution-case/article_2ee33a04-7d24-52c2-9184-e8980eb8ae39.html">source</a><br><br>

      <a href="https://www.atlaspiers.com/using-carbon-fiber-to-repair-bridges-in-georgia/">bridge repair</a>
      -->

      Lignin is the second largest renewable carbon source on the planet after cellulose. 

      <a href="https://www.marketwatch.com/press-release/lignin-market-to-rise-at-a-valuation-of-125-kilo-tons-by-2024-2019-05-03">Lignin Market Valuation</a>
      <br><br>

      <a href="https://polymer-additives.specialchem.com/news/industry-news/biomass-conversion-acrylonitrile-precursor-carbon-fiber-000213482">Conversion of Biomass into Acrylonitrile, a Key Precursor for Carbon Fiber Manufacturing</a><br>
      "The catalyst used for the nitrilation chemistry is about <b>three times less expensive</b> than the catalyst used in the petroleum-based process and it's a simpler process. The chemistry is endothermic so it doesn't produce excess heat, and unlike the petroleum-based process, it doesn't produce the toxic byproduct hydrogen cyanide. Rather, the bio-based process only produces water and alcohol as its byproducts." &nbsp;Related: <a href="https://www.tun.com/blog/green-carbon-fiber-alternative-fossil-fuels/">An Alternative To Carbon Fiber from Fossil Fuels</a><br><br>
      
      <a href="https://www.lignotech.com/About-us/About-LignoTech-Florida">LignoTech Florida - Owned by Rayonier Advanced Materials (45%) and Borregaard (55%)</a><br>

      "The 110 million USD investment represents a production capacity of 100,000 metric tonnes lignin measured as dry substance. In a planned second phase, the capacity can later be expanded by 50,000 tonnes."


      <!--
      Bridges made from carbon fiber
      https://www.hj3.com/bridges-built-carbon-fiber/
      -->

      <h2 id="forestry">Fast Growth Forestry - for Superwood, Nanowood and Transparent Wood</h2>

      <a href="https://fellowsblog.ted.com/how-to-grow-a-forest-really-really-fast-d27df202ba09">How to Grow a Forest Really, Really Fast</a><br>
      To establish a mature, native forest in ten times the normal rate of forests planted by humans, amend the soil to a depth of one meter, add a locally abundant biomass. Plant three to five saplings per square meter. "This grows into a forest so dense that after eight months, sunlight can’t reach the ground. At this point, every drop of rain that falls is conserved, and every leaf that falls is converted into humus. The more the forest grows, the more it generates nutrients for itself, accelerating further growth. This density also means that individual trees begin competing for sunlight — another reason these forests grow so fast."<br><br>

      <a href="http://sofew.cfr.msstate.edu/papers/0218dickens.pdf">Biosolids as Fast Growth Forest Fertilizer on Marginal Soils</a><br>

      <!--In Georgia, most soils are naturally low in organic matter.-->
     
        Adding organic matter to soil reduces surface runoff and erosion, improves the capacity to hold water and nutrients while increasing yields (<a href="https://extension.uga.edu/publications/detail.html?number=SB27&title=Beneficial%20Reuse%20of%20Municipal%20Biosolids%20in%20Agriculture">UGA</a>). 
         Urban sewage is easier to treat because it doesn't contain heavy metals from industrial activities that typically occur in rural areas. 

      <a href="https://extension.umd.edu/sites/extension.umd.edu/files/_docs/programs/woodland-steward/Ch17Kays.pdf">Deep-row biosolid applications</a> 
      allows for forest products at sites near treatment plants in urban areas. 
      Deep-rooted plant material uptakes nitrogent to minimize leaching into groundwater.
      In Egypt, <a href="https://inhabitat.com/egyptian-researchers-discover-a-way-to-grow-forests-in-the-desert-with-sewage/">deserts are being reclaimed</a> and eucalyptus trees are producing wood at four times the rate of pine plantations in Germany.<br><br>

      <a href="https://umdrightnow.umd.edu/news/umd-researchers-create-super-wood-stronger-most-metals">Super Wood - Stronger than most Titanium Alloys</a><br>

      Super wood is created by removing lignin from soft woods like pine or balsa, which grow fast and are more environmentally friendly. The process can replace slower-growing but denser woods like teak, in furniture or buildings.<br><br>

      <a href="https://www.nextbigfuture.com/2018/03/better-insulation-with-nanowood-transparent-wood-and-solar-devices-made-from-wood.html">Nanowood - Better Insulator than Styrofoam</a><br>
      Nanowood is produced by boiling out the lignin, treating with Hydrogen Peroxide, then freeze-drying the remaining pure cellulose.<br><br>

      <a href="https://www.nextbigfuture.com/2018/03/better-insulation-with-nanowood-transparent-wood-and-solar-devices-made-from-wood.html">Transparent Wood - Three Times Better Insulator than Glass</a><br>
      Infused with polymers and sturdier than traditional wood, transparent wood can be used in place of less environmentally friendly materials, such as plastics. 
      As a daylight-harvesting roof, the aligned wood channels guide the sunlight into the house without relying of the sun’s angle. 
    </div>
  </section>



  <section id="local">
    <div class="content">
      <div>
        <h1 style="margin-bottom:0px">Recycling Processors (B2B)</h1>
        <a href="https://data.georgia.org/#recycling" target="_parent">Additional Maps</a> - Landfills, Inert Waste, Transfer Stations
      </div><br><br>

      <iframe class="block-map-directory cf" id="map_directory" src="https://data.georgia.org/site/widget.html#processors" style="width:100%;height:500px"></iframe>
    </div>
  </section>


  <section id="places" class="litePanel">
    <div class="content">

      <h1>All The Places API</h1>

      <div style="padding:20px;background-color:#fff; float:right; margin:0 0 0px 30px;">
        <img src="../img/overview/places-us.gif" style="width:100%; max-width:300px;">
      </div>

      
      Location and product data will be harvested from existing websites and databases using the techniques developed for 
      <a href="https://github.com/alltheplaces/alltheplaces" style="white-space: nowrap;">All The Places</a>. 
      Over 450 spiders and scrapers pull data nightly from sites that post their 
      locations online. Material input-output requests can be shared using CSV files, HTML posts and API feeds.<br><br>

      <b>Example:</b> Your construction contract has a requirement to use 50% reclaimed lumber. 
      Share a spreadsheet documenting how much lumber you need and when you need it.  Groups like 
      the <a href="https://www.lifecyclebuildingcenter.org/">Lifecycle Building Center</a> retrieve lumber after film productions and can 
      watch for taredown dates that fit your schedule.
      <br><br>

      In addition, census data from <a href="https://uszipcode.readthedocs.io/01-Tutorial/index.html">uszipcode datasets</a>, will be combined with establishment and employment counts from the <a href="../industries">Complete ZIP Code Industry Detail Files</a> to model impacts using the <a href="https://github.com/usepa/useeio_api/wiki/Use-the-API">USEEIO API</a>.<br><br>

      <a href="../samples/feed">Publish your Inventory and Wishlist Data</a>
      
    </div>
  </section>


  <section id="projects">
    <div class="content">
      <div id="projectsDiv" class="rootdoc"></div>
    </div>
  </section>

</div><!-- /allsections -->

  
  <style>
    #footerBox {
      padding-top:20px;
      padding-bottom:20px;
    }
    @media (max-width: 700px) {
      #footerBox {
        padding-left:40px; 
      }
    }
  </style>
  <div id="footerBox" class="padding" style="clear:both; background: #eee; z-index: 2000; overflow: auto">
    <div class="content">
      <div id="partners" style="float:left; margin-right:40px">
        <h2>Partners</h2>

        <img src="../img/logo/epa.png" style="width:100px; float:left; margin-right: 20px">
        <img src="../img/logo/georgia.png" style="width:120px; float:left; margin-top: -4px">
      </div>

      <div style="float:left">
        <h2>Get Involved</h2>

        <a href="https://model.georgia.org/communities/">Register</a> to participate in our 2020 events and internships.<br><br>

        <a href="https://GitHub.com/modelearth/community/">Edit on GitHub</a> - Contribute to our code and datasets.<br><br>

        <a href="https://waze.com/carpool" target="waze_carpool">Waze Carpool</a> - Find carpool riders and drivers near you.<br><br>
        <br><br>
      </div>
    </div>
  </div>




    
    <style>
      .sectionMargin {
        margin:0 50px 0 90px;
      }
      @media (max-width: 700px) {
        .sectionMargin {
          margin-left: 30px;
        }
        #hublist {
          padding-left: 0px;
        }
      }


      .footerButton {
        font-size: 12pt;
        padding: 4px 8px 4px 8px;
        margin:5px;
        border-radius: 14px;
        border-radius: 4px;
        min-height: 20px;
        height: 20px;
        background-color: #348ec0;
        color: #fff;
        text-decoration: none !important;
        text-align: center;
        min-width: 80px;
        displayX: block;
        float:left;
      }
      .footerButton:hover {
        color:#fff;
        background: blue;
      }
    </style>



  <div id="floatingButtons" style="text-align: center">
    <div style="padding-right:10px; display: inline-block;">
      <a href="#" class="footerButton">Intro</a>
      <a href="#objectives" class="footerButton">Objectives</a>
      <a href="#gomap" class="footerButton">Map</a>
      <a href="#projects" class="footerButton">Starters</a>
      <!--
      <a href="#items" class="footerButton">Items</a>
      -->
    </div>
  </div>

  



<script>
// Set your own Mapbox access token below.
// Restrict which domains your token is loaded through.
// https://blog.mapbox.com/url-restrictions-for-access-tokens-5f7f7eb90092

var mbAttrX = 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
    '<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
    'Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
    mbUrl = 'https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiZWUyZGV2IiwiYSI6ImNqaWdsMXJvdTE4azIzcXFscTB1Nmcwcm4ifQ.hECfwyQtM7RtkBtydKpc5g';
var mbAttr = '',
    mbUrl = 'https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiZWUyZGV2IiwiYSI6ImNqaWdsMXJvdTE4azIzcXFscTB1Nmcwcm4ifQ.hECfwyQtM7RtkBtydKpc5g';

var grayscale = L.tileLayer(mbUrl, {id: 'mapbox.light', attribution: mbAttr}),
    satellite = L.tileLayer(mbUrl, {id: 'mapbox.satellite',   attribution: mbAttr}),
    streets = L.tileLayer(mbUrl, {id: 'mapbox.streets',   attribution: mbAttr});

//var layerGroups = {};
var dataParameters = []; 
var dp = {};
var layerControl = false;
var layerControl2 = false;

//////////////////////////////////////////////////////////////////
// Usage:
//
// data: csv file with 
//  lon, lat for position
//  one numerical or categorical attribute to be visualized
//  + (optional) one attribute calles "address" to be shown in tooltip
// 
// 1. set class of aside element above to match the name of the data
// 2. insert data into aside element
// 3. specify the following dp (data parameters) 
// 4. initialize map center with [lat, lon]
// 5. Load Layers Asynchronously
//
// options for scales:
// "scaleThreshold", "scaleOrdinal", "scaleOrdinal" or "scaleQuantile"
//////////////////////////////////////////////////////////////////

/////////// LOAD FROM HTML ///////////

// ------> for more html datasets, copy FROM here
// dataset 1

dp = {
  selector: "aside.myDataset",
  delimiter: ",",
  numColumns: ["lat","lon","index","address"],
  valueColumn: "index",
  scaleType: "scaleThreshold",
}
dp.name = dp.selector.split(".").pop(); // name: myDataset
// specify end
dp.data = readData(dp.selector, dp.delimiter, dp.numColumns, dp.valueColumn);
dp.scale = getScale(dp.data, dp.scaleType, dp.valueColumn);
dp.group = L.layerGroup();
//dataParameters.push(dp); // Adds to layer menu - Uncomment to reactivate
//addIcons(dp);
//addLegend(dp.scale, dp.scaleType, dp.name);

// ------> for more html datasets, copy TO here

// dataset 2 - Example of scaled with color-code for 7 ranges
/*
dp = {
  selector: "aside.d2",
  delimiter: ",",
  numColumns: ["lat","lon","value"],
  valueColumn: "value",
  scaleType: "scaleQuantize",
}
dp.name = dp.selector.split(".").pop(); // name: d2
dp.data = readData(dp.selector, dp.delimiter, dp.numColumns, dp.valueColumn);
dp.scale = getScale(dp.data, dp.scaleType, dp.valueColumn);
dp.group = L.layerGroup();
dataParameters.push(dp);
addIcons(dp);
addLegend(dp.scale, dp.scaleType, dp.name);
*/

// INTERMODAL PORTS
dp = {
  selector: "aside.Intermodal_Ports",
  delimiter: ",",
  numColumns: ["lat","lon"],
  valueColumn: "value",
  scaleType: "scaleOrdinal",
  //scaleType: "scaleQuantile",
}
//dp.name = dp.selector.split(".").pop(); // name: Intermodal_Ports
dp.name = "Intermodal Ports"
dp.data = readData(dp.selector, dp.delimiter, dp.numColumns, dp.valueColumn);
dp.color = '#0033ff'; // Alternative to scale
dp.scale = getScale(dp.data, dp.scaleType, dp.valueColumn);

dp.group = L.layerGroup();
dp.group2 = L.layerGroup();
//dp.iconName = 'device_hub';
dp.iconName = 'language';
dataParameters.push(dp);
addIcons(dp);
//addIcons(dp);
// Reactivate once colors differ
//addLegend(dp.scale, dp.scaleType, dp.name);


function loadFromCSV(dataset) {
  // 5. Load Layers Asynchronously
  //var dataset = "../community/map/zip/basic/places.csv";

  // Change below
  // latColumn: "lat",
  //      lonColumn: "lon",
  //var dataset = "https://datascape.github.io/community/map/zip/basic/places.csv";

  d3.csv(dataset).then(function(data) {
      dp = {
        numColumns: ["zip","lat","lon"],
        valueColumn: "name",
        latColumn: "lat",
        lonColumn: "lon",
        //scaleType: "scaleQuantile",
        scaleType: "scaleOrdinal",
      }
      dp.name = "Smart Data Projects"; // Must match "map.addLayer(overlays" below.
      dp.data = readCsvData(data, dp.numColumns, dp.valueColumn);
      dp.scale = getScale(dp.data, dp.scaleType, dp.valueColumn);
      dp.group = L.layerGroup();
      dp.group2 = L.layerGroup();
      dp.iconName = 'star';
      dataParameters.push(dp);
      overlays[dp.name] = dp.group; // Allows for use of dp.name with removeLayer and addLayer
      overlays2[dp.name] = dp.group2;

      if(layerControl === false) {
        layerControl = L.control.layers(baseLayers, overlays).addTo(map);
      }
      if(layerControl2 === false) {
        layerControl2 = L.control.layers(baseLayers, overlays2).addTo(map2);
      }
      layerControl.addOverlay(dp.group, dp.name); // Appends to existing layers
      layerControl2.addOverlay(dp.group2, dp.name); // Appends to existing layers
      addIcons(dp);
      //addLegend(dp.scale, dp.scaleType, dp.name); // Reactivate

      showList(dp);

      // All layers reside in this object:
      console.log("dataParameters:");
      console.log(dataParameters);

      // Remove from control and background.
      //layerControl.removeLayer(grayscale);
      //map.removeLayer(grayscale);

      
      //layerControl.removeLayer(overlays["myDataset"]); // Remove from control 
      //map.removeLayer(overlays["myDataset"]); // Remove from map

      map.addLayer(overlays["Intermodal Ports"]);
      map2.addLayer(overlays2["Smart Data Projects"]);
  })
  .catch(function(error){ 
       alert("Data loading error: " + error)
  })
}
loadFromCSV("map.csv");
//loadFromCSV("breweries.csv");

/////////// MAP SETTINGS ///////////

// 33.863516,-84.368775
var mapCenter = [32.90,-83.35]; // [latitude, longitude]


var map = L.map('map', {
  center: mapCenter,
  scrollWheelZoom: false,
  zoom: 7
});
var map2 = L.map('map2', {
  center: mapCenter,
  scrollWheelZoom: false,
  zoom: 7
});

// Add above to include overlays WITHOUT showing in legend:
// layers: [dataParameters[0].group]

// If added both baseLayers and overlays WITHOUT showing in legend:
// layers: [grayscale, dataParameters[0].group]

// Avoid layers: [grayscale] above 
// - two sets of tiles would be loaded when upper baseLayer is changed using radio buttons.


var baseLayers = {
  "Grayscale": grayscale,
  "Streets": streets,
  "Satellite": satellite
};

var overlays = {};
var overlays2 = {};
dataParameters.forEach(function(ele) {
  overlays[ele.name] = ele.group; // Add to layer menu
  overlays2[ele.name] = ele.group; // Add to layer menu
})
if(layerControl === false) {
  baseLayers["Streets"].addTo(map); // Set the initial baselayer.
}
if(layerControl2 === false) {
  baseLayers["Grayscale"].addTo(map2); // Set the initial baselayer.
}
layerControl = L.control.layers(baseLayers, overlays).addTo(map);
layerControl2 = L.control.layers(baseLayers, overlays2).addTo(map2);

  // Sample of single icon - place in addIcons function
  // Create a semi-transparent bus icon
  var busIcon = L.IconMaterial.icon({
    icon: 'local_shipping',            // Name of Material icon
    iconColor: '#fff',              // Material icon color (could be rgba, hex, html name...)
    markerColor: 'rgba(255,0,0,0.5)',  // Marker fill color
    outlineColor: 'rgba(255,0,0,0.5)',            // Marker outline color
    outlineWidth: 1,                   // Marker outline width 
  })
  
  // Attach the icon to the marker and add to the map
  //L.marker([33.74,-84.38], {icon: busIcon}).addTo(map)
  
  // Set .my-div-icon styles in CSS
  //var myIcon = L.divIcon({className: 'my-div-icon'});
  //L.marker([32.90,-83.83], {icon: myIcon}).addTo(map);


/////////////////////////////////////////
// helper functions
/////////////////////////////////////////
function addLegend(scale, scaleType, title) {
  var svg = d3.select("#allLegends")
    .append("div")
      .attr("class", "legend "  + title)
    .append("svg")
      .style("width", 200);
      // .styleX("height", 300)

  svg.append("g")
      .attr("class", "legend")
      .attr("transform", "translate(20,20)");

  var legend = d3.legendColor()
    .labelFormat(d3.format(".2f"))
    .title(title);

  if (scaleType === "scaleThreshold") {
    legend = legend.labels(d3.legendHelpers.thresholdLabels);
  }

  legend.scale(scale);  

  svg.select("g.legend")
    .call(legend);
}

function hex2rgb(hex) {
  // long version
  r = hex.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i);
  if (r) {
    return r.slice(1,4).map(function(x) { return parseInt(x, 16); });
  }
  // short version
  r = hex.match(/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i);
  if (r) {
    return r.slice(1,4).map(function(x) { return 0x11 * parseInt(x, 16); });
  }
  return null;
}


function addIcons(dp) {
  var circle,circle2;
  var iconColor, iconColorRGB, iconName;
  var colorScale = dp.scale;
  dp.data.forEach(function(element) {
    iconColor = colorScale(element[dp.valueColumn]);
    if (dp.color) { 
      iconColor = dp.color;
    }
    // How to make element always lowercase?
    console.log("element " + element + " iconColor: " + iconColor)
    if (typeof dp.latColumn == "undefined") {
      dp.latColumn = "lat";
    }
    if (typeof dp.lonColumn == "undefined") {
      dp.lonColumn = "lon";
    }
    iconColorRGB = hex2rgb(iconColor);
    iconName = dp.iconName;
    var busIcon = L.IconMaterial.icon({
      icon: iconName,            // Name of Material icon - star
      iconColor: '#fff',         // Material icon color (could be rgba, hex, html name...)
      markerColor: 'rgba(' + iconColorRGB + ',0.7)',  // Marker fill color
      outlineColor: 'rgba(' + iconColorRGB + ',0.7)', // Marker outline color
      outlineWidth: 1,                   // Marker outline width 
    })
  
    // Attach the icon to the marker and add to the map
    //L.marker([element[dp.latColumn], element[dp.lonColumn]], {icon: busIcon}).addTo(map)
    circle = L.marker([element[dp.latColumn], element[dp.lonColumn]], {icon: busIcon}).addTo(dp.group);
    circle2 = L.marker([element[dp.latColumn], element[dp.lonColumn]], {icon: busIcon}).addTo(dp.group2);

    var output = "<b>" + element[dp.valueColumn] + "</b><br>" + element.address + "<br>" + element.city + " " + element.state + " " + element.zip + "<br>";
    if (element.phone || element.phone_afterhours) {
      output += element.phone + " " + element.phone_afterhours + "<br>";
    }

    if (element.schedule) {
      output += "Hours: " + element.schedule + "<br>";
    }
    if (element.website) {
      output += "<a href='" + element.website + "' target='_blank'>Website</a>";
    }
    if (element.website && element[dp.latColumn]) {
      output += " | ";
    }
    if (element[dp.latColumn]) {
        output += "<a href='https://www.waze.com/ul?ll=" + element[dp.latColumn] + "%2C" + element[dp.lonColumn] + "&navigate=yes&zoom=17'>Waze Directions</a><br>";
    }
    circle.bindPopup(output);
    circle2.bindPopup(output);
  });
}

function showList(dp) {

  var colorScale = dp.scale;
  dp.data.forEach(function(element) {


    var output = "<div style='width:15px;height:15px;margin-right:8px;margin-top:3px;background:" + colorScale(element[dp.valueColumn]) + ";float:left'></div><div style='overflow:auto'>"
    output += "<b style='font-size:16px;color:#333'>" + element[dp.valueColumn] + "</b><br>" + element.address + "<br>" + element.city + " " + element.state + " " + element.zip + "<br>";
    if (element.phone || element.phone_afterhours) {
     output += element.phone + " " + element.phone_afterhours + "<br>";
    }
    if (element.schedule) {
     output += "Hours: " + element.schedule + "<br>";
    }
    if (element.website) {
      output += "<a href='" + element.website + "' target='_blank'>Website</a><br>";
    }
    if (element.website && element[dp.latColumn]) {
      output += " | ";
    }
    if (element[dp.latColumn]) {
        output += "<a href='https://www.waze.com/ul?ll=" + element[dp.latColumn] + "%2C" + element[dp.lonColumn] + "&navigate=yes&zoom=17'>Waze Directions</a>";
    }
     output += "<br></div><div style='clear:both'></div>";

    $("#narrowlist").append(output);

    // Detail List with Descriptions
    output = "<div style='width:15px;height:15px;margin-right:8px;margin-top:3px;background:" + colorScale(element[dp.valueColumn]) + ";float:left'></div><div style='overflow:auto'>"
    output += "<b style='font-size:16px;color:#333'>" + element.title + "</b><br>";

    output += element.description + "<br>";

    /*
    output += "<b>" + element.name + "</b> " + element.address + ", " + element.city + " " + element.state + " " + element.zip + " ";
    if (element.phone || element.phone_afterhours) {
     output += element.phone + " " + element.phone_afterhours + "<br>";
    }
    if (element.schedule) {
     output += "Hours: " + element.schedule + "<br>";
    }
     if (element[dp.latColumn]) {
        output += " - <a href='https://www.waze.com/ul?ll=" + element[dp.latColumn] + "%2C" + element[dp.lonColumn] + "&navigate=yes&zoom=17'>Waze Directions</a><br>";
    }
    */

    if (element.website) {
      // Learn More:
      output += "<a href='" + element.website + "' style='display:block;margin-top:5px' target='_blank'>" + element.website.replace("https://","").replace("http://","").replace("www.","") + "</a><br>";
    }
    output += "</div><div style='clear:both'></div>";

    $("#detaillist").append(output);


  });
}

// Scales: http://d3indepth.com/scales/
function getScale(data, scaleType, valueCol) {
  var scale;
  if (scaleType === "scaleThreshold") {
    var min = d3.min(data, function(d) { return d[valueCol]; });
    var max = d3.max(data, function(d) { return d[valueCol]; });
    var d = (max-min)/7;
    scale = d3.scaleThreshold()
      .domain([min+1*d,min+2*d,min+3*d,min+4*d,min+5*d,min+6*d])
      .range(['#ffffe0','#ffd59b','#ffa474','#f47461','#db4551','#b81b34','#8b0000']);
  } else if (scaleType === "scaleQuantize") {
    scale = d3.scaleQuantize()
      .domain(d3.extent(data, function(d) { return d[valueCol]; }))
      .range(['#ffffe0','#ffd59b','#ffa474','#f47461','#db4551','#b81b34','#8b0000']);
  } else if (scaleType === "scaleQuantile") {
    scale = d3.scaleQuantile()
      .domain(data.map(function(d) { return d[valueCol]; }).sort(function(a, b){return a-b}))
      .range(['#ffffe0','#ffd59b','#ffa474','#f47461','#db4551','#b81b34','#8b0000']);            
  } else if (scaleType === "scaleOrdinal") {
    scale = d3.scaleOrdinal()
      .domain(data.map(function(d) { return d[valueCol]; }))
      .range(d3.schemePaired);
  }
  return scale;
}

function readData(selector, delimiter, columnsNum, valueCol) {
  var psv = d3.dsvFormat(delimiter);
  var initialData = psv.parse(removeWhiteSpaces(d3.select(selector).text())); 
  _data = initialData.filter(function(e) { return e[valueCol].length !== 0; });
  console.log("Skipped: " + (initialData.length - _data.length) + " rows.");
  
  if (typeof columnsNum !== "undefined") {
    _data.forEach( function (row) {
      convertToNumber(row, columnsNum);
    });
  }
  //console.log(_data);
  return _data;
}
function readCsvData(_data, columnsNum, valueCol) {
  //console.log(_data);
  
  // 'for of' loop is more efficient than forEach. 
  // Also works on objects. You can call it like this 'for let d of Object.entries(data){ }'

  if (typeof columnsNum !== "undefined") {
    _data.forEach( function (row) {
      //row = removeWhiteSpaces(row);
      convertToNumber(row, columnsNum);
    });
  }
  console.log(_data);
  return _data;
}
function convertToNumber(d, _columnsNum) {
  for (var perm in d) {
    if (_columnsNum.indexOf(perm) > -1)
      if (Object.prototype.hasOwnProperty.call(d, perm)) {
        d[perm] = +d[perm];
      }
    }  
  return d;
} 

function removeWhiteSpaces (str) {
  return str.replace(/^\s+|\s+$|\s+(?=\s)/g, "");
}


var revealHeader = true;
$('#sidecolumnContent a').click(function(event) {
  revealHeader = false;
  /*
  setTimeout(function(){ 
    var y = $(window).scrollTop();  //your current y position on the page
    //$(window).scrollTop(y-50); // Adjust for fixed header.

  }, 10);
  */
});


// FIXED MAP POSITION ON SCROLL
function elementScrolled(elem) { // scrolled into view
  var docViewTop = $(window).scrollTop();
  var docViewBottom = docViewTop + $(window).height();
  var elemTop = $(elem).offset().top;
  return ((elemTop <= docViewBottom) && (elemTop >= docViewTop));
}
function bottomReached(elem) { // bottom scrolled into view
  var docViewTop = $(window).scrollTop();
  var docViewBottom = docViewTop + $(window).height();
  var hangover = 10; // Extend into the next section, so map remains visible.
  //var elemTop = $(elem).offset().top;
  var elemBottom = $(elem).offset().top + $(elem).height() + hangover - docViewBottom;
  //console.log('offset: ' + $(elem).offset().top + ' height:' + $(elem).height() + ' docViewBottom:' + docViewBottom + ' elemBottom: ' + elemBottom);
  //console.log('bottomReached elemBottom: ' + elemBottom);
  return (elemBottom < 0);
}
function topReached(elem) { // top scrolled out view
  var docViewTop = $(window).scrollTop();
  //var docViewBottom = docViewTop + $(window).height();
  var pretop = 80; // Extend into the next section, so map remains visible.
  //var elemTop = $(elem).offset().top;
  var elemTop = $(elem).offset().top - docViewTop - pretop;
  //console.log('offset: ' + $(elem).offset().top + ' height:' + $(elem).height() + ' docViewBottom:' + docViewBottom + ' elemBottom: ' + elemBottom);
  //console.log('topReached elemTop: ' + elemTop);
  return (elemTop < 0);
}


 // Anchors corresponding to menu items

/*
var scrollItems = menuItems.map(function(){
   var item = $($(this).attr("href"));
    if (item.length) { return item; }
});
var topMenuHeight = 150;
*/




var mapFixed = false;
var previousScrollTop = $(window).scrollTop();

$(window).scroll(function() {
  if (revealHeader == false) {
    $('.headerbar').hide();
    revealHeader = true; // For next manual scroll
  } else if ($(window).scrollTop() > previousScrollTop) { // Scrolling Up
    if ($(window).scrollTop() > previousScrollTop + 20) { // Scrolling Up fast
      $('.headerbar').hide();
    }
  } else { // Scrolling Down
    if ($(window).scrollTop() < (previousScrollTop - 20)) { // Reveal if scrolling down fast
      $('.headerbar').show();
    }
  }
  previousScrollTop = $(window).scrollTop();

  // Detect when #hublist is scrolled into view and add class mapHolderFixed.
  // Include mapHolderBottom when at bottom.
  if (bottomReached('#hublist')) {
    if (mapFixed==true) { // Only unstick when crossing thresehold to minimize interaction with DOM.
      //console.log('bottom Visible');
      $('.mapHolderInner').removeClass('mapHolderFixed');
      $('.mapHolderInner').addClass('mapHolderBottom');
      // Needs to be at bottom of dev
      mapFixed = false;
    }
  } else if(topReached('#hublist')) {
    if (mapFixed==false) {
      $('.mapHolderInner').addClass('mapHolderFixed');
      $('.mapHolderInner').removeClass('mapHolderBottom');
      //alert("fixed position")
      mapFixed = true;
    }
  } else if(!topReached('#hublist') && mapFixed == true) { // Not top reached (scrolling down)
    $('.mapHolderInner').removeClass('mapHolderFixed');
    mapFixed = false;
  }

   

});

</script>

<script>
  loadMarkupPage("README.md", "readmeDiv", "_parent");
  loadMarkupPage("../README.md", "projectsDiv", "_parent");



  setTimeout(function(){ 
      // Get the levels below root
      var foldercount = (location.pathname.split('/').length - 1); // - (location.pathname[location.pathname.length - 1] == '/' ? 1 : 0) // Removed because ending with slash or filename does not effect levels. Increased -1 to -2.
      foldercount = foldercount - 2;
      var climbcount = foldercount;
      if(location.host.indexOf('localhost') >= 0) {
        climbcount = foldercount - 0;
      }
      var climbpath = "";
      for (var i = 0; i < climbcount; i++) {
        climbpath += "../";
      }

      // Make links relative to the current directory.
      $(".rootdoc a[href]").each(function() {
        if($(this).attr("href").toLowerCase().indexOf("http") < 0) {
            $(this).attr("href", climbpath + $(this).attr('href'));
        }
      })

    }, 1000);

</script>
<style>

</style>
<link rel="stylesheet" href="../css/material_icons.css" />
</body>
</html>