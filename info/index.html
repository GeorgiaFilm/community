<!DOCTYPE html>
<html lang="en-us">
<head>
<meta charset="utf-8">
<title>Community Info</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="icon" type="image/x-icon" href="../img/logo/favicon.png" />

<script type="text/javascript" src="../js/jquery/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../js/common/common.js"></script>
<script type="text/javascript" src="../js/common/navigation.js"></script>


<!--
<link rel="stylesheet" type="text/css" href="../../io/charts/useeio/widgets.css">
-->

<script src="../js/d3/d3.v5.min.js"></script>
<script type="text/javascript" src="../js/common/showdown.min.js"></script>

<!-- PRODUCTION -->
<link rel="stylesheet" type="text/css" href="../../io/charts/useeio/widgets.css">
<script src="../../io/charts/useeio/lib/useeio_widgets.js"></script>

<!-- LOCAL DEV -->
<!--
<link rel="stylesheet" type="text/css" href="../../useeio-widgets/build/widgets.css">
<script src="../../useeio-widgets/build/lib/useeio_widgets.js"></script>
-->

<script type="text/javascript" src="js/topindustries.js"></script>

<!-- After USEEIO to alter css -->
<link rel="stylesheet" href="../css/community.css" />

<style>
/* Temp overrides */
.mock-up {
	displayX: inline-block !important;
}
.indicator-row {
    height: auto;
}
.download-section {
	display: none; /* Until moved to footer */
}
#list_main {
	display:none;
}
.markdownEye {
	display:none;
}

#map1 {
	height:350px !important;
}
#data {
	displayX: none !important;
}

.headerImage {
	display:none;
}
.littleHeader {
	border-bottom: 1px solid #ccc;
	padding-bottom:5px;
	margin-bottom:5px;
}

h1 {
	margin-bottom: 1px;
	padding-bottom: 1px;
}
.module_h1 {
	font-size:28px;
	padding-top:0px;
	margin-top:0px;
	margin-bottom:20px;
	border-bottom: 1px solid #ddd;
}
#pageColumns > div {
	padding:20px;
}

.mainColumn {
	display:table-cell;
}
.mainColumn1 {
	min-width: 500px;
	width: 500px; 
}
@media (max-width: 800px) {
	.mainColumn {
		display: block;
	}
	.mainColumn1 {
		width: 100%;
	}
}
</style>
  

<script>
	// INIT
	var hash = getHash(); // Include all existing
	$(window).on('hashchange', function() { // Avoid window.onhashchange since overridden by map and widget embeds
		param = loadParams(location.search,location.hash); // param is declared in common.js
		updateLoc(param.geo); // Check counties. (search-filters.js)
		geoChanged(param); // Apply county filter to industry list (topindustries.js)
	});
</script>

</head>

<body>

<script type="text/javascript" src="../map/starter/embed-map.js?show=smart"></script>



<!--
Source: https://bl.ocks.org/luluwuluying/ace3699c70a2e3e7a2bb
To do: Multicolumn sort (but allow for fixed first column)
https://rawgit.com/joequery/Stupid-Table-Plugin/master/examples/multicolumn-sort.html
-->
<!-- two columns -->
<div id="pageColumns" style="margin:0 10px 0 10px; display: table; max-width:1800px;">
<div class="mainColumn mainColumn1" style="font-size: 15px; padding-right: 30px">

	<!--

	<h1 class="module_h1">The Impact Game</h1>

	<div style="max-width:400px; margin-bottom:10px">
	Adjust your local industry mix to maximize job quality, 
	value added revenue and positive environmental&nbsp;impacts.
	</div>
	-->

	<div id="aboutToolsDiv" style="position: relative;"></div>
	<br><br>
	

</div>

<div class="mainColumn mainColumn2" style="padding-left:20px; padding-top:20px">
	<div class="io">

		<div style="float:right; font-size:40px;color:#777">&#9881;</div>
		<div>
			<!-- Industries in Troup County -->
			<h1 id="industryheader" class="module_h1"></h1>
		</div>

		<!--
		<div style="max-width:700px">
			<b>Adjust Industry Levels</b> to reflect technology initiatives that generate new revenue streams, create jobs and increase your community's positive environmental impact.
		</div>
		<br><br>
		-->

		<div id="detail_selection">
			<select id="catsort" class="picklist">
	          <option value="payann" selected>By Annual payroll</option>
	          <option value="emp" >By Employee Count</option>
	          <option value="estab">By Establishments</option>
	        </select>
	        <select id="naics" class="picklist">
	          <option value="2">Sectors - 2 digits</option>
	          <!--option value="2">Subsectors - 3 digits</option-->
	          <option value="4">Industry Group - 4 digits</option>
	          <!--option value="4">NAICS Industry - 5 digits</option-->
	          <option value="6" selected>National Code - 6 digits</option>
	        </select>
		</div>
		<br>

		<!-- Sector List Format -->
		<style>
			#sector_list {
				display: table;
				width:100%;
			}
			#sector_list .row {
				display: table-row;
				
			}
			#sector_list .cell {
				display: table-cell;
				padding-right: 15px;
			}
			#sector_list .right {
				display: table-cell;
				text-align: right;
			}
			#sector_list .right div {
				white-space: nowrap;
			}
			#sector_list .right img {
				margin-left: 8px;
			}
			#sector_list div {
				margin-bottom: 5px;
			}
			#sector_list .cell-height {
				overflow: hidden;
				max-height: 16px;
			}
		</style>
		
		<div style="padding:5px">
			<div id="p1">
				

			</div>
		</div>
		<br>
		<!-- /Sector List Format -->


		<h1 style="margin-bottom:10px">Set Priorities</h1>

		<div style="float:left; margin-right:30px">
		<div class="littleHeader">Currently Quantifiable</div>
		Evaluate a Specific Technology<br>
		Increase Local Revenue<br>
		Increase Employment<br>
		Increase Air Quality<br>
		Increase Water Quality<br>
		Increase Clean Energy<br>
		Increase Health and Wellness<br>
		<br><br>
		</div>

		<div style="float:left">
		<div class="littleHeader">Areas to Quantify</div>
		Increase Higher Paying Jobs<br>
		Increase Long-term Carbon Capture<br>
		Increase Access to Amenities<br>
		Increase Beauty in Land Use<br>
		Increase Green Materials<br>
		Increase Total Satisfaction<br>
		</div>
		<div style="clear:both"></div>


		<div id="includedContent"></div>
		<script> 
		    $(function(){
		    	function showBubbleChart() {
		      		$("#includedContent").load("bubble.html");
		      	}
		      	//showBubbleChart(); // To be called by menu in header.
		    });
		</script> 

	</div>
</div>
</div>
<!-- /two columns -->



<div style="margin-left:30px">
	
	<div style="max-width:500px">
		<h1 id="infoHeader" class="module_h1">Industries in Georgia</h1>

		<div style="display:none">
		<div style="font-size: 15px;">
			<input name="sector_action" type="radio">
			Recruit a new industry<br>
			<input name="sector_action" type="radio">
			Transform an existing industry<br>
			<br>
		</div>
		</div>
	</div>

    <div style="margin: 0 auto;">
        <div class="impact-heatmap">
        </div>
        <div id="paginator">
        </div>
        <br><br>
    </div>
</div>


<!--
https://www.epa.gov/enviroatlas

<div class="contentpadding">
<h1>Sample of embedding <a href="https://www.epa.gov/enviroatlas/enviroatlas-interactive-map">Enviro Atlas</a></h1>
</div>
<iframe src="https://epa.maps.arcgis.com/apps/MapJournal/index.html?appid=0659c53852f4425fb3460e78de67a3ef" style="width:100%;height:800px; margin-bottom:40px"></iframe>
-->



<br><br>


<div style="margin:0 30px 0 30px; max-width: 2000px;">
	
	<!--
	<h1 class="module_h1">My Local Area</h1>

	Click columns to sort. Choose geo to define your local area. (Activating shortly.)<br><br>

	<div style="width:100%" class="output_table2 rotateHeader"></div>
	<br>
	-->

	<!--
		<div style="padding:40px">
		5-digit NAICS are the same in Canada, Mexico and the US.<br>
		6-digit NAICS are country-specific. 
		</div>
	-->

	<div id="bioenergySummaryDiv"></div>

</div>
<br><br><br>

<div id="fixedFooter">
	<!--
	Click columns to sort. &nbsp; Source: info/data/usa/GA/GAcounties.csv
	-->
	<a href="https://model.georgia.org/io/">About the Georgia Industry Evaluator</a> &mdash; 
	<a href="https://model.earth/io/charts">USEEIO Input-Output Widgets</a>
</div>


<script type="text/javascript">
'use strict'; // Optional, make sure we are declaring variables.

/*
// COMMON - also resides in embed-map.js
function loadScriptXXXXXX(url, callback)
{
  if (!document.getElementById(url)) { // Prevents multiple loads.
    var script = document.createElement('script');
    script.type = 'text/javascript';
    script.src = url;
    script.id = url; // Prevents multiple loads.
    // Bind the event to the callback function. Two events for cross browser compatibility.
    script.onreadystatechange = callback;
    script.onload = callback;
    //$(document).ready(function () { // Only needed if appending to body
    var head = document.getElementsByTagName('head')[0];
    head.appendChild(script);
    //});
    console.log("loadScript loaded: " + url);
  } else {
    console.log("loadScript script already available: " + url);
    callback();
  }
  // Nested calls are described here: https://books.google.com/books?id=ZOtVCgAAQBAJ&pg=PA6&lpg=PA6
}
// END COMMON
*/


document.getElementById("clearButton").addEventListener("click", function(){
	hash.geo=""
	updateHash();
	param=loadParams(location.search,location.hash);
	console.log(param)
	geoChanged(param)
});




if (param["geo"] == "US13001,US13005,US13127,US13161,US13229,US13305") {
	loadMarkdown("../../io/tools/bioeconomy-planner/about.md", "aboutToolsDiv", "_parent");
	loadMarkdown("../../io/tools/bioeconomy-planner/bioenergy/README.md", "bioenergySummaryDiv", "_parent");

} else {
	loadMarkdown("../../io/tools/industry-impact/about.md", "aboutToolsDiv", "_parent");
}

function locClick(which) {
	//console.log(which.id);
	hash.geo = $('.geo:checked').map(function() {return this.id;}).get().join(','); 
	updateHash();
	//if(window.location.hash.includes("geo=US")){
		param=loadParams(location.search,location.hash);
		//console.log(param["geo"])
		geoChanged(param)
	//}
}
/*
document.getElementById('showValues').onclick = function() {
    // access properties using this keyword
    if ( this.checked ) {
        // if checked ...
        $(".output_table th.rotate > div > span").css("font-weight","600");
        $(".output_table td:nth-child(n+2) > div > div").css("visibility","visible");
        $(".output_table td:nth-child(n+2) > div > div").css("overflow","none");
        $(".output_table td:nth-child(n+2) > div").css("max-width","none");
        $(".output_table td:nth-child(n+2) > div").css("padding-left","5px");

        // Restore hidden columns
        $(".output_table th:nth-child(n+2)").css("display","table-cell");
        $(".output_table td:nth-child(n+2)").css("display","table-cell");
        
    } else {
        $(".output_table th.rotate > div > span").css("font-weight","400");
        $(".output_table td:nth-child(n+2) > div > div").css("visibility","hidden");
        $(".output_table td:nth-child(n+2) > div > div").css("overflow","auto");
        $(".output_table td:nth-child(n+2) > div").css("max-width","0px");
        $(".output_table td:nth-child(n+2) > div").css("padding-left","0px");

        // Hide entire column
        $(".output_table th:nth-child(n+2)").css("display","none");
        $(".output_table td:nth-child(n+2)").css("display","none");
    }
};
*/
function getHash() {
	return (function (a) {
    if (a == "") return {};
    var b = {};
    for (var i = 0; i < a.length; ++i) {
        var p = a[i].split('=');
        if (p.length != 2) continue;
        b[p[0]] = decodeURIComponent(p[1].replace(/\+/g, " "));
    }

    return b;
    })(window.location.hash.substr(1).split('&'));
}

function updateHash() {
	// Remove blank attributes

    for (var i in hash) {
      if (hash[i] === null || hash[i] === undefined || hash[i] === '') {
        delete hash[i];
      }

    }

    var hashString = decodeURIComponent($.param(hash)); // decode to display commas in URL

    // Update if hash has occurred
    if (window.location.hash != hashString) {
    	let searchTitle = 'Page ' + hashString;
        let queryString = '#' + hashString;

        //console.log("Update URL to: " + window.location.pathname + window.location.search + queryString);
        window.history.pushState("", searchTitle, window.location.pathname + window.location.search + queryString);
    }

}
</script>




<script>

    var config = useeio.urlConfig();
    var modelID = config.get().model || 'GAUSEEIO';

    var model = useeio.model({
        endpoint: '/io/charts/useeio/api',
        model: modelID,
        asJsonFiles: true,
    });

    var heatmap = useeio.impactHeatmap({
        model: model,
        selector: '.impact-heatmap',
    });

    var paginator = useeio.paginator({
        model: model,
        selector: '#paginator',
    });

    config.join(heatmap);
    config.join(paginator);

</script>



</body>
</html>